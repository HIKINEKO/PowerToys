<UserControl x:Class="PowerRenameUILib.MainWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:local="using:PowerRenameUILib" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:controls="using:Microsoft.UI.Xaml.Controls" xmlns:muxc="using:Microsoft.UI.Xaml.Controls" controls:BackdropMaterial.ApplyToRootOrPageBackground="True" xmlns:animatedVisuals="using:Microsoft.UI.Xaml.Controls.AnimatedVisuals" mc:Ignorable="d">

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
          Padding="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="0" /> <!-- 48 if we need to draw the title bar ourself -->
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Preview table -->
        <Grid Grid.Row="5"
              Background="{ThemeResource LayerFillColorDefaultBrush}"
              VerticalAlignment="Stretch"
              HorizontalAlignment="Stretch"
              CornerRadius="8"
              BorderThickness="1"
              BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}">
            <Grid.RowDefinitions>
                <RowDefinition Height="48" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <StackPanel Orientation="Horizontal">
                <CheckBox x:Name="checkBox_selectAll" IsChecked="True" MinWidth="36" Content="" x:Uid="SelectAllCheckBox" Margin="16,0,0,0" Checked="SelectAll" Unchecked="SelectAll" />
                <Image Width="16" Margin="0,0,0,0" Grid.Column="1" Source="ms-appx:///Assets/file.png" HorizontalAlignment="Center" />

            <TextBlock x:Uid="TxtBlock_Original" Grid.Column="2" FontWeight="Medium" Margin="18,-2,0,0" VerticalAlignment="Center" />
            </StackPanel>
            <AppBarSeparator Margin="-6,4,0,4" HorizontalAlignment="Right" />
            
                <TextBlock x:Uid="TxtBlock_Renamed" FontWeight="Medium" Grid.Column="1" Margin="4,-2,0,0" HorizontalAlignment="Left" VerticalAlignment="Center" />
            <Button Content="&#xE16E;" Background="Transparent" FontFamily="{ThemeResource SymbolThemeFontFamily}" Height="32" x:Uid="FilterButton" Grid.Column="1" BorderThickness="0" HorizontalAlignment="Right" Margin="0,0,8,0">
                <Button.Flyout>
                    <MenuBarItemFlyout Placement="Bottom">
                        <controls:RadioMenuFlyoutItem x:Name="button_showAll" Click="ShowAll" x:Uid="ShowAll" IsChecked="True" GroupName="Filter" />
                        <controls:RadioMenuFlyoutItem x:Name="button_showRenamed" Click="ShowRenamed" x:Uid="ShowOnly" GroupName="Filter" />
                    </MenuBarItemFlyout>
                </Button.Flyout>
            </Button>

            <Rectangle Height="1" Grid.ColumnSpan="5" Fill="{ThemeResource CardStrokeColorDefaultBrush}" HorizontalAlignment="Stretch" VerticalAlignment="Bottom" />
            <ListView IsTabStop="false"
                        SelectionMode="None"
                        XYFocusKeyboardNavigation="Enabled"
                        IsItemClickEnabled="False"
                        Grid.ColumnSpan="6" 
                        ItemsSource="{x:Bind ExplorerItems, Mode=OneWay}"
                        Margin="4,0,0,0"
                        Grid.Row="1">
                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="IsTabStop" Value="False" />
                        <Setter Property="HorizontalContentAlignment"  Value="Stretch"/>
                    </Style>
                </ListView.ItemContainerStyle>
                <ListView.ItemTemplate>
                    <DataTemplate x:Name="ExplorerItemTemplate" x:DataType="local:ExplorerItem">
                        <Grid Height="24" Margin="0,4,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <StackPanel Orientation="Horizontal" Grid.Column="0">
                                <StackPanel MinWidth="{x:Bind Indentation}"/>
                                <CheckBox TabIndex="0"
                              MinWidth="36"
                              XYFocusKeyboardNavigation="Enabled"
                              Checked="Checked_ids"
                              IsTabStop="True"
                              Unchecked="Checked_ids"
                              Content=""
                              Name="{x:Bind IdStr}"
                              AutomationProperties.Name="{x:Bind Original}"
                              AutomationProperties.HelpText="{x:Bind Renamed}"
                              IsChecked="{x:Bind Checked, Mode=TwoWay}" />
                                <Image Width="16" Source="{x:Bind ImagePath}" HorizontalAlignment="Left" />
                                <TextBlock Margin="20,0,0,0"
                               Text="{x:Bind Original, Mode=OneWay}"
                               Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                               VerticalAlignment="Center"
                               FontSize="12" />
                            </StackPanel>
                            <TextBlock Text="{x:Bind Renamed, Mode=OneWay}" Grid.Column="1" FontWeight="Bold" VerticalAlignment="Center" FontSize="14" />
                        </Grid>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>

        <AutoSuggestBox x:Name="textBox_search" Height="40" x:Uid="SearchBox" Margin="0,0,40,0" VerticalContentAlignment="Center" Grid.Row="1" ItemsSource="{x:Bind SearchMRU}" />

        <Button FontFamily="{ThemeResource SymbolThemeFontFamily}"
                Grid.Row="1"
                Visibility="{Binding ElementName=checkBox_regex, Path=IsChecked}"
                MinHeight="32"
                x:Uid="RegExButton"
                Background="Transparent"
                BorderBrush="Transparent"
                Content="&#xE946;"
                HorizontalAlignment="Right">
            <Button.Flyout>
                <Flyout x:Name="RegExFlyout">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="28" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="48" />
                        </Grid.RowDefinitions>
                        <TextBlock x:Uid="RegExCheatSheet_Title" FontWeight="SemiBold" />
                        <ListView ItemsSource="{x:Bind SearchRegExShortcuts}" Grid.Row="1" IsItemClickEnabled="True" Margin="-4,12,0,0" ItemClick="RegExItemClick">
                            <ListView.ItemTemplate>
                                <DataTemplate x:DataType="local:PatternSnippet">
                                    <Grid ColumnSpacing="8" Margin="-10,0,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="48" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Border CornerRadius="4" Padding="8" HorizontalAlignment="Left" BorderThickness="1" BorderBrush="{ThemeResource ButtonBorderBrush}" Background="{ThemeResource ButtonBackground}">
                                            <TextBlock FontFamily="Consolas" Foreground="{ThemeResource ButtonForeground}" Text="{x:Bind Code}" />
                                        </Border>

                                        <TextBlock Text="{x:Bind Description}" FontSize="12" Grid.Column="1" Margin="0,0,0,0" Foreground="{ThemeResource TextFillColorSecondaryBrush}" VerticalAlignment="Center" />
                                    </Grid>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                        <HyperlinkButton Grid.Row="2" VerticalAlignment="Bottom">
                            <TextBlock x:Uid="RegExCheatSheet_LearnMore" />
                        </HyperlinkButton>
                    </Grid>
                </Flyout>
            </Button.Flyout>
        </Button>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Grid.Row="2" Margin="0,8,0,48" Spacing="20">
                    <CheckBox x:Name="checkBox_regex" x:Uid="CheckBox_RegEx" Margin="0,0,0,0" />
                    <CheckBox x:Name="checkBox_matchAll" x:Uid="CheckBox_MatchAll" Margin="0,0,0,0" />
                    <CheckBox x:Name="checkBox_case" x:Uid="CheckBox_Case" Margin="0,0,0,0" />
                </StackPanel>
        

        <AutoSuggestBox x:Name="textBox_replace" Height="40"  Grid.Row="3" x:Uid="ReplaceBox" VerticalContentAlignment="Center" Margin="0,0,40,0" ItemsSource="{x:Bind ReplaceMRU}" />

                        <Button FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                MinHeight="32"
                                Grid.Row="3"
                                x:Uid="FileCreationButton"
                                Background="Transparent"
                                BorderBrush="Transparent"
                                Content="&#xE946;"
                                HorizontalAlignment="Right">
                            <Button.Flyout>
                                <Flyout x:Name="DateTimeFlyout" ShouldConstrainToRootBounds="False">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="28" />
                                            <RowDefinition Height="*" />
                                        </Grid.RowDefinitions>
                                        <TextBlock x:Uid="DateTimeCheatSheet_Title" FontWeight="SemiBold" />
                                        <ListView ItemsSource="{x:Bind DateTimeShortcuts}" Grid.Row="1" IsItemClickEnabled="True" Margin="-4,12,0,0" ItemClick="DateTimeItemClick">
                                            <ListView.ItemTemplate>
                                                <DataTemplate x:DataType="local:PatternSnippet">
                                                    <Grid ColumnSpacing="8" Margin="-10,0,0,0">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="56" />
                                                            <ColumnDefinition Width="*" />
                                                        </Grid.ColumnDefinitions>
                                                        <Border CornerRadius="4" Padding="8" HorizontalAlignment="Left" BorderThickness="1" BorderBrush="{ThemeResource ButtonBorderBrush}" Background="{ThemeResource ButtonBackground}">
                                                            <TextBlock FontFamily="Consolas" Foreground="{ThemeResource ButtonForeground}" Text="{x:Bind Code}" />
                                                        </Border>

                                                        <TextBlock Text="{x:Bind Description}" FontSize="12" Grid.Column="1" Margin="0,0,0,0" Foreground="{ThemeResource TextFillColorSecondaryBrush}" VerticalAlignment="Center" />
                                                    </Grid>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>
                                        </ListView>

                                    </Grid>
                                </Flyout>
                            </Button.Flyout>
                        </Button>

        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Grid.Row="4" Margin="0,8,0,48">

            <StackPanel Orientation="Horizontal" Grid.Column="1" Spacing="4" Grid.Row="1">
                    <TextBlock x:Uid="TextBox_ApplyTo" x:Name="ApplyToLabel" FontSize="12" Margin="0,0,8,0" VerticalAlignment="Center" Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                    <ComboBox x:Name="comboBox_renameParts" SelectedIndex="0" Width="200" AutomationProperties.LabeledBy="{Binding ElementName=ApplyToLabel}" HorizontalAlignment="Stretch" Grid.Column="0" Grid.Row="1">
                    <x:String>Filename + extension</x:String>
                    <x:String>Filename only</x:String>
                    <x:String>Extension only</x:String>
                </ComboBox>
                <AppBarSeparator Margin="5,0,5,0" />
                <ToggleButton x:Name="toggleButton_includeFiles" Content="&#xE160;" MinHeight="32" IsChecked="True" FontFamily="{ThemeResource SymbolThemeFontFamily}" x:Uid="ToggleButton_IncludeFiles" Style="{StaticResource CustomToggleButtonStyle}" />
                <ToggleButton x:Name="toggleButton_includeFolders" Content="&#xE8B7;" MinHeight="32" IsChecked="True" FontFamily="{ThemeResource SymbolThemeFontFamily}" x:Uid="ToggleButton_IncludeFolders" Style="{StaticResource CustomToggleButtonStyle}" />
                <ToggleButton x:Name="toggleButton_includeSubfolders" Content="&#xE12F;" MinHeight="32" IsChecked="True" FontFamily="{ThemeResource SymbolThemeFontFamily}" x:Uid="ToggleButton_IncludeSubFolders" Style="{StaticResource CustomToggleButtonStyle}" />
            </StackPanel>

            <StackPanel Orientation="Horizontal" Spacing="4">
                <TextBlock x:Uid="TextBlock_TextFormatting" FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}" Margin="48,0,8,0" VerticalAlignment="Center" />
                <ToggleButton x:Name="toggleButton_lowerCase" Content="aa" FontWeight="Medium" MinHeight="32" x:Uid="ToggleButton_Lowercase" Style="{StaticResource CustomToggleButtonStyle}" />
                <ToggleButton x:Name="toggleButton_upperCase" Content="AA" FontWeight="Medium" MinHeight="32" x:Uid="ToggleButton_Uppercase" Style="{StaticResource CustomToggleButtonStyle}" />
                <ToggleButton x:Name="toggleButton_titleCase" Content="Aa" FontWeight="Medium" MinHeight="32" x:Uid="ToggleButton_TitleCase" Style="{StaticResource CustomToggleButtonStyle}" />
                <ToggleButton x:Name="toggleButton_capitalize" Content="Aa Aa" FontWeight="Medium" MinHeight="32" x:Uid="ToggleButton_Capitalize" Style="{StaticResource CustomToggleButtonStyle}" />
                <AppBarSeparator Margin="5,0,5,0" />

                <ToggleButton x:Name="toggleButton_enumItems" Content="&#xEA40;" FontFamily="{ThemeResource SymbolThemeFontFamily}" MinHeight="32" x:Uid="ToggleButton_EnumItems" Style="{StaticResource CustomToggleButtonStyle}" />
            </StackPanel>
        </StackPanel>
    


        <StackPanel Orientation="Horizontal" Grid.Row="6" Spacing="8" Margin="0" Grid.Column="1" VerticalAlignment="Bottom" HorizontalAlignment="Right">

                <Button x:Name="button_settings" Height="32" x:Uid="TxtBlock_ButtonSettings" FontFamily="{ThemeResource SymbolThemeFontFamily}" Grid.Row="5" Padding="6" Background="Transparent" BorderBrush="Transparent" Grid.Column="1">
                    <Button.Content>
                        <controls:AnimatedIcon x:Name="SearchAnimatedIcon">
                            <controls:AnimatedIcon.Source>
                                <animatedVisuals:AnimatedSettingsVisualSource />
                            </controls:AnimatedIcon.Source>
                            <controls:AnimatedIcon.FallbackIconSource>
                                <controls:SymbolIconSource Symbol="Setting" />
                            </controls:AnimatedIcon.FallbackIconSource>
                        </controls:AnimatedIcon>

                    </Button.Content>
                </Button>

                <Button x:Name="button_docs" Content="&#xE11B;" FontFamily="{ThemeResource SymbolThemeFontFamily}" x:Uid="DocsButton" Background="Transparent" BorderBrush="Transparent" Grid.Row="1" Height="32" VerticalAlignment="Bottom" HorizontalAlignment="Left" Click="OpenDocs" />


            <muxc:SplitButton Grid.Row="1" Style="{StaticResource SplitAccentButtonStyle}" x:Name="button_rename" Margin="0,0,20,0" x:Uid="ButtonApply" Click="button_rename_Click" HorizontalAlignment="Right" VerticalAlignment="Bottom" IsEnabled="{x:Bind UIUpdatesItem.ButtonRenameEnabled, Mode=OneWay}">
                <muxc:SplitButton.KeyboardAccelerators>
                    <KeyboardAccelerator Key="Enter" />
                    <KeyboardAccelerator Key="Enter" Modifiers="Control" />
                </muxc:SplitButton.KeyboardAccelerators>
                <muxc:SplitButton.Content>
                    <StackPanel Orientation="Horizontal">
                        <FontIcon Glyph="&#xE13E;" FontSize="14" VerticalAlignment="Center" Margin="0,2,10,0" />
                        <TextBlock x:Uid="TxtBlock_ButtonApply" />
                    </StackPanel>
                </muxc:SplitButton.Content>
                <muxc:SplitButton.Flyout>
                    <MenuFlyout>
                        <MenuFlyoutItem x:Uid="TxtBlock_ButtonApplyAndClose" Click="MenuFlyoutItem_Click" />
                    </MenuFlyout>
                </muxc:SplitButton.Flyout>
            </muxc:SplitButton>

            </StackPanel>

  

        <!--<StackPanel x:Name="TitleBar" Orientation="Horizontal">
            <Image Source="Assets/PowerRename.png" Width="16" Height="16" VerticalAlignment="Top" Margin="20,9,0,0"/>
            <TextBlock Text="PowerRename" Style="{StaticResource CaptionTextBlockStyle}" Margin="18,8,8,0" VerticalAlignment="Top" />
        </StackPanel>-->
    </Grid>
</UserControl>